# ä¿®å¤æ€»ç»“ï¼šç‰¹å®šä»»åŠ¡æˆå°±åŠŸèƒ½

## ğŸ”§ å·²ä¿®å¤çš„é—®é¢˜

### 1. Null Assertion é”™è¯¯
**é—®é¢˜**: åœ¨é€‰æ‹©ç‰¹å®šä»»åŠ¡æ—¶å‡ºç° `_owner != null` çš„æ–­è¨€å¤±è´¥
**åŸå› **: TaskProvider å¯èƒ½æœªå®Œå…¨åˆå§‹åŒ–ï¼Œæˆ–è€…ä»»åŠ¡æŸ¥æ‰¾æ—¶å‡ºç°ç©ºå¼•ç”¨
**è§£å†³æ–¹æ¡ˆ**: 
- æ·»åŠ äº† try-catch åŒ…è£…ä»»åŠ¡æŸ¥æ‰¾é€»è¾‘
- åœ¨ AddAchievementScreen åˆå§‹åŒ–æ—¶ç¡®ä¿åŠ è½½ä»»åŠ¡åˆ—è¡¨
- æ·»åŠ ç©ºä»»åŠ¡åˆ—è¡¨çš„å¤„ç†å’Œæç¤º

### 2. UI çŠ¶æ€ç®¡ç†é—®é¢˜
**é—®é¢˜**: æ¡ä»¶ç±»å‹åˆ‡æ¢æ—¶å¯èƒ½ä¿ç•™æ—§çš„é€‰æ‹©çŠ¶æ€
**è§£å†³æ–¹æ¡ˆ**:
- åœ¨æ¡ä»¶ç±»å‹åˆ‡æ¢æ—¶æ¸…ç©ºç›¸å…³é€‰æ‹©ï¼ˆä»»åŠ¡IDã€éš¾åº¦ç­‰ï¼‰
- ç¡®ä¿UIçŠ¶æ€ä¸é€‰æ‹©ä¿æŒåŒæ­¥

### 3. ä»»åŠ¡åˆ—è¡¨ç©ºçŠ¶æ€å¤„ç†
**é—®é¢˜**: å½“æ²¡æœ‰ä»»åŠ¡æ—¶ï¼Œä¸‹æ‹‰èœå•å¯èƒ½æ˜¾ç¤ºå¼‚å¸¸
**è§£å†³æ–¹æ¡ˆ**:
- æ·»åŠ ä»»åŠ¡åˆ—è¡¨ä¸ºç©ºæ—¶çš„å‹å¥½æç¤ºç•Œé¢
- æç¤ºç”¨æˆ·å…ˆåˆ›å»ºä»»åŠ¡

## ğŸ¯ ä¿®å¤è¯¦æƒ…

### ä»£ç æ”¹è¿›

1. **é”™è¯¯å¤„ç†å¢å¼º**:
```dart
try {
  final selectedTask = allTasks.firstWhere((t) => t.id == value);
  _selectedTaskTitle = selectedTask.title;
  _targetValue = 1;
} catch (e) {
  print('Error finding task with id $value: $e');
  _selectedTaskTitle = null;
}
```

2. **åˆå§‹åŒ–ä¼˜åŒ–**:
```dart
@override
void initState() {
  super.initState();
  WidgetsBinding.instance.addPostFrameCallback((_) {
    final taskProvider = Provider.of<TaskProvider>(context, listen: false);
    taskProvider.loadTasks();
  });
}
```

3. **çŠ¶æ€æ¸…ç†**:
```dart
onChanged: (value) => setState(() {
  _conditionType = value!;
  if (_conditionType != ConditionType.specificTask) {
    _selectedTaskId = null;
    _selectedTaskTitle = null;
  }
  // å…¶ä»–çŠ¶æ€æ¸…ç†...
}),
```

4. **ç©ºçŠ¶æ€å¤„ç†**:
```dart
if (allTasks.isEmpty) {
  return Container(
    padding: EdgeInsets.all(16),
    decoration: BoxDecoration(
      color: Colors.grey[100],
      borderRadius: BorderRadius.circular(8),
      border: Border.all(color: Colors.grey[300]!),
    ),
    child: Text('æš‚æ— å¯ç”¨ä»»åŠ¡ï¼Œè¯·å…ˆåˆ›å»ºä¸€äº›ä»»åŠ¡'),
  );
}
```

## âœ… åŠŸèƒ½éªŒè¯

ç°åœ¨åº”ç”¨åº”è¯¥èƒ½å¤Ÿï¼š

1. **å®‰å…¨åœ°é€‰æ‹©ç‰¹å®šä»»åŠ¡** - ä¸ä¼šå‡ºç° null assertion é”™è¯¯
2. **æ­£ç¡®å¤„ç†ç©ºä»»åŠ¡åˆ—è¡¨** - æ˜¾ç¤ºå‹å¥½æç¤º
3. **ä¿æŒçŠ¶æ€ä¸€è‡´æ€§** - æ¡ä»¶ç±»å‹åˆ‡æ¢æ—¶æ­£ç¡®æ¸…ç†çŠ¶æ€
4. **é”™è¯¯æ¢å¤** - å³ä½¿å‡ºç°å¼‚å¸¸ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ

## ğŸ§ª æµ‹è¯•å»ºè®®

1. **åŸºç¡€åŠŸèƒ½æµ‹è¯•**:
   - åˆ›å»ºå‡ ä¸ªæµ‹è¯•ä»»åŠ¡
   - è¿›å…¥æˆå°±ç®¡ç†ï¼Œé€‰æ‹©"å®Œæˆç‰¹å®šä»»åŠ¡"
   - éªŒè¯ä»»åŠ¡é€‰æ‹©å™¨æ­£å¸¸å·¥ä½œ

2. **è¾¹ç•Œæƒ…å†µæµ‹è¯•**:
   - åœ¨æ²¡æœ‰ä»»åŠ¡æ—¶è¿›å…¥æˆå°±åˆ›å»ºé¡µé¢
   - åˆ‡æ¢ä¸åŒçš„æ¡ä»¶ç±»å‹
   - å°è¯•ä¿å­˜ä¸å®Œæ•´çš„è¡¨å•

3. **æ•°æ®ä¸€è‡´æ€§æµ‹è¯•**:
   - åˆ›å»ºç‰¹å®šä»»åŠ¡æˆå°±åæ£€æŸ¥ä¿å­˜ç»“æœ
   - å®Œæˆç›®æ ‡ä»»åŠ¡åæ£€æŸ¥æˆå°±è¿›åº¦æ›´æ–°

## ğŸš€ åç»­ä¼˜åŒ–

å¦‚æœä»æœ‰é—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ï¼š

1. **æ·»åŠ åŠ è½½çŠ¶æ€æŒ‡ç¤º** - åœ¨ä»»åŠ¡åŠ è½½æ—¶æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
2. **æ”¹è¿›é”™è¯¯æç¤º** - æ›´è¯¦ç»†çš„ç”¨æˆ·å‹å¥½é”™è¯¯ä¿¡æ¯
3. **æ·»åŠ æ•°æ®éªŒè¯** - ç¡®ä¿é€‰æ‹©çš„ä»»åŠ¡ä»ç„¶å­˜åœ¨
4. **æ€§èƒ½ä¼˜åŒ–** - ç¼“å­˜ä»»åŠ¡åˆ—è¡¨å‡å°‘é‡å¤åŠ è½½

ä¿®å¤å®Œæˆï¼ç°åœ¨å¯ä»¥å°è¯•é‡æ–°æµ‹è¯•ç‰¹å®šä»»åŠ¡æˆå°±åŠŸèƒ½äº†ã€‚